<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tenant Dashboard - Smart Rent House</title>
    <style>
        :root{--accent:#4f46e5;--muted:#6b7280;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--bg:#f6f8fb;--card:#ffffff}
        html,body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#eef2ff 0%, #f8fafc 100%);color:#0f172a;min-height:100vh}
        .navbar{background:var(--card);padding:16px 32px;box-shadow:0 2px 8px rgba(15,23,42,0.04);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
        .logo{font-weight:700;color:var(--accent);font-size:1.2rem}
        .nav-links{display:flex;gap:24px;align-items:center}
        .nav-links a{color:var(--accent);text-decoration:none;font-weight:500;transition:all 0.2s}
        .nav-links a:hover{opacity:0.7}
        .logout-btn{background:var(--danger);color:white;padding:8px 16px;border-radius:6px;text-decoration:none;font-weight:600;font-size:0.9rem}
        .container{max-width:1200px;margin:0 auto;padding:32px}
        h1{font-size:2rem;margin:0 0 8px}
        .lead{color:var(--muted);margin:0 0 32px}
        .dashboard-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:32px}
        .stat-card{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(15,23,42,0.06)}
        .stat-icon{font-size:2rem;margin-bottom:12px}
        .stat-number{font-size:2rem;font-weight:700;color:var(--accent);margin:8px 0}
        .stat-label{color:var(--muted);font-size:0.9rem}
        .section{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(15,23,42,0.06);margin-bottom:24px}
        .section h2{margin:0 0 16px;font-size:1.3rem;border-bottom:2px solid var(--accent);padding-bottom:12px}
        .action-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
        .action-card{background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);color:white;padding:24px;border-radius:12px;text-decoration:none;text-align:center;transition:all 0.3s}
        .action-card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(79,70,229,0.2)}
        .action-card-icon{font-size:2.5rem;margin-bottom:12px}
        .action-card-title{font-weight:600;margin:8px 0}
        .action-card-desc{font-size:0.9rem;opacity:0.9}
        .properties-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
        .property-item{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(15,23,42,0.06);transition:all 0.3s;border:2px solid transparent}
        .property-item:hover{box-shadow:0 8px 24px rgba(15,23,42,0.12);border-color:var(--accent)}
        .property-header{padding:16px;background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);color:white}
        .property-name{font-size:1.1rem;font-weight:600;margin:0}
        .property-address{font-size:0.85rem;opacity:0.9;margin:4px 0 0}
        .property-body{padding:16px}
        .property-info{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
        .info-item{font-size:0.9rem}
        .info-label{color:var(--muted);font-weight:600}
        .info-value{color:#0f172a;font-weight:500;margin-top:2px}
        .property-footer{display:flex;gap:8px;margin-top:12px}
        .property-btn{flex:1;padding:8px 12px;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all 0.2s;font-size:0.9rem}
        .btn-details{background:var(--accent);color:white}
        .btn-details:hover{opacity:0.9}
        .btn-contact{background:#f3f4f6;color:var(--accent);border:1px solid var(--accent)}
        .btn-contact:hover{background:var(--accent);color:white}
        .status-badge{display:inline-block;padding:4px 12px;border-radius:20px;font-size:0.85rem;font-weight:600;margin-top:8px}
        .status-pending{background:#fef3c7;color:#92400e}
        .status-approved{background:#dcfce7;color:#166534}
        .status-rejected{background:#fee2e2;color:#991b1b}
        .empty-state{text-align:center;padding:40px;color:var(--muted)}
        .empty-icon{font-size:3rem;margin-bottom:16px}
        .quick-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}
        .quick-stat{background:var(--card);padding:16px;border-radius:8px;border-left:4px solid var(--accent)}
        .quick-stat-value{font-size:1.5rem;font-weight:700;color:var(--accent)}
        .quick-stat-label{color:var(--muted);font-size:0.9rem;margin-top:4px}
        @media (max-width:768px){.container{padding:16px}.nav-links{gap:12px}.dashboard-grid{grid-template-columns:1fr}.action-grid{grid-template-columns:1fr}.properties-list{grid-template-columns:1fr}}
    </style>
</head>
<body>
<!-- Navbar -->
<div class="navbar">
    <div class="logo">üè† Smart Rent House</div>
    <div class="nav-links">
        <span style="color:var(--muted);font-weight:500" th:text="'Welcome, ' + ${user.firstName}">Welcome, Tenant</span>
        <a th:href="@{/home}">Home</a>
        <a th:href="@{/logout}" class="logout-btn">Logout</a>
    </div>
</div>

<!-- Main Content -->
<div class="container">
    <h1>Browse Available Properties üîç</h1>
    <p class="lead">Find and book your perfect rental</p>

    <!-- Quick Stats -->
    <div class="quick-stats">
        <div class="quick-stat">
            <div class="quick-stat-value" th:text="${availableProperties != null ? #lists.size(availableProperties) : '0'}">0</div>
            <div class="quick-stat-label">Available Properties</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">My Bookings</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">Saved Properties</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">Inquiries Sent</div>
        </div>
    </div>

    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
        <div class="stat-card">
            <div class="stat-icon">üîç</div>
            <div class="stat-label">Browse Properties</div>
            <div class="stat-number" th:text="${availableProperties != null ? #lists.size(availableProperties) : '0'}">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚ù§Ô∏è</div>
            <div class="stat-label">Favorites</div>
            <div class="stat-number">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìù</div>
            <div class="stat-label">Active Inquiries</div>
            <div class="stat-number">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-label">Messages</div>
            <div class="stat-number">0</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="section">
        <h2>Quick Actions</h2>
        <div class="action-grid">
            <div class="action-card" style="background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);cursor:pointer" onclick="document.getElementById('searchInput').focus()">
                <div class="action-card-icon">üîç</div>
                <div class="action-card-title">Search Properties</div>
                <div class="action-card-desc">Find your next home</div>
            </div>
            <a href="#" class="action-card" style="background:linear-gradient(135deg,var(--success) 0%,#059669 100%)">
                <div class="action-card-icon">‚ù§Ô∏è</div>
                <div class="action-card-title">My Favorites</div>
                <div class="action-card-desc">Saved properties</div>
            </a>
            <a href="#" class="action-card" style="background:linear-gradient(135deg,var(--warning) 0%,#d97706 100%)">
                <div class="action-card-icon">üí¨</div>
                <div class="action-card-title">Messages</div>
                <div class="action-card-desc">Chat with landlords</div>
            </a>
            <a href="/tenant/profile" class="action-card" style="background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)">
                <div class="action-card-icon">‚öôÔ∏è</div>
                <div class="action-card-title">Settings</div>
                <div class="action-card-desc">Account preferences</div>
            </a>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="section">
        <div style="display:flex;gap:12px;margin-bottom:16px">
            <input type="text" id="searchInput" placeholder="Search by property name, location, or price..." style="flex:1;padding:12px;border:1px solid #e5e7eb;border-radius:8px;font-size:0.95rem">
            <button style="padding:12px 24px;background:var(--accent);color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.2s" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Search</button>
        </div>
    </div>

    <!-- Available Properties Section -->
    <div class="section">
        <h2>Available Properties</h2>
        <div th:if="${#lists.isEmpty(availableProperties)}" class="empty-state">
            <div class="empty-icon">üè†</div>
            <h3>No properties available yet</h3>
            <p>Check back soon for new listings from landlords</p>
        </div>
        
        <div class="properties-list" th:unless="${#lists.isEmpty(availableProperties)}">
            <div class="property-item" th:each="property : ${availableProperties}" th:attr="data-id=${property.id}">
                <div class="property-header">
                    <h3 class="property-name" th:text="${property.name}">Property Name</h3>
                    <p class="property-address" th:text="${property.address + (property.city != null ? ', ' + property.city : '')}">Address</p>
                </div>
                <div class="property-body">
                    <div class="property-info">
                        <div class="info-item">
                            <div class="info-label">Location</div>
                            <div class="info-value" th:text="${property.city} + (property.pincode != null ? ', ' + property.pincode : '')">City, PIN</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Monthly Rent</div>
                            <div class="info-value" th:text="'‚Çπ' + ${property.price}">‚ÇπPrice</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Owner</div>
                            <div class="info-value" th:text="${property.ownerName}">Landlord Name</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Status</div>
                            <div class="info-value" th:text="${property.verificationStatus}">Status</div>
                        </div>
                    </div>
                    <p style="color:var(--muted);font-size:0.9rem;margin:12px 0" th:text="${property.description != null ? property.description : 'No description available'}">Description</p>
                    <span class="status-badge status-approved" th:if="${property.verificationStatus == 'APPROVED'}">‚úì Verified & Available</span>
                    <span class="status-badge status-pending" th:if="${property.verificationStatus == 'PENDING'}">‚è≥ Under Review</span>
                    <div class="property-footer">
                        <button class="property-btn btn-details" onclick="alert('View Details - Coming Soon')">View Details</button>
                        <button class="property-btn btn-contact" onclick="alert('Contact Landlord - Coming Soon')">Contact</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Information Section -->
    <div class="section">
        <h2>üìö How It Works</h2>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px">
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">1. Browse</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Search and explore verified properties</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">2. Inquiry</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Send inquiry or message the landlord</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">3. Agreement</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Finalize terms and rental agreement</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">4. Move In</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Complete payment and move to your new home</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('searchInput').addEventListener('input', function(e) {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.property-item').forEach(item => {
            const name = item.querySelector('.property-name').textContent.toLowerCase();
            const address = item.querySelector('.property-address').textContent.toLowerCase();
            if (name.includes(query) || address.includes(query)) {
                item.style.display = '';
            } else {
                item.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>
        <aside class="sidebar" aria-label="Primary sidebar">
            <div class="brand">
                <div class="mark" aria-hidden="true">
                    <!-- mini house -->
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3l9 7h-2v9h-5v-6H10v6H5V10H3l9-7z" fill="#0f1724"/></svg>
                </div>
                <div>
                    <h4>SMART RENT</h4>
                    <p>Tenant dashboard</p>
                </div>
            </div>

            <nav class="nav" aria-label="Sidebar links">
                <a class="active" href="#dashboard" data-target="dashboard">Dashboard</a>
                <a href="#properties" data-target="properties">My Properties</a>
                <a href="#payments" data-target="payments">Payments</a>
                <a href="#requests" data-target="requests">Maintenance</a>
                <a href="#messages" data-target="messages">Messages</a>
                <a href="#profile" data-target="profile">Profile</a>
            </nav>

            <div class="section-title">Quick actions</div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
                <button class="pill" id="bookVisitBtn">Book visit</button>
                <button class="pill" id="payRentBtn">Pay rent</button>
            </div>

            <div class="user-card">
                <div class="avatar" th:text="${user.firstName != null ? #strings.substring(user.firstName,0,1) : ''} + (user.lastName != null ? #strings.substring(user.lastName,0,1) : '')">CB</div>
                <div class="user-meta">
                    <strong th:text="${user.firstName + ' ' + user.lastName}">Tenant Name</strong>
                    <small th:text="${user.tenantType != null ? user.tenantType + ' tenant' : 'Tenant'}">Active tenant</small>
                </div>
            </div>
        </aside>

        <!-- MAIN -->
        <main class="main" id="dashboard">
            <div class="topbar fade-up">
                <div class="search">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    <input id="searchInput" placeholder="Search properties, messages or payments" aria-label="Search" />
                </div>

                <div class="top-actions">
                    <button class="btn" id="newRequestBtn">New request</button>
                    <div style="display:flex;align-items:center;gap:12px">
                        <div style="text-align:right">
                            <div style="font-weight:700" th:text="${user.firstName + ' ' + user.lastName}">Hello, Tenant</div>
                            <div style="font-size:12px;color:var(--muted)">Welcome back üëã</div>
                        </div>
                        <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#fff,#f2f2ff);display:grid;place-items:center;font-weight:700" th:text="${(user.firstName != null ? #strings.substring(user.firstName,0,1) : '') + (user.lastName != null ? #strings.substring(user.lastName,0,1) : '')}">TB</div>
                    </div>
                </div>
            </div>

            <section class="grid" style="margin-top:10px">
                <!-- KPIs -->
                <div class="card">
                    <div class="kpi">
                        <small>Next rent due</small>
                        <h3>‚Çπ12,500 <small style="color:var(--muted);font-weight:600">‚Äî 12 Dec 2025</small></h3>
                        <div style="margin-top:10px">
                            <button class="btn" id="payNowBtn">Pay Now</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="kpi">
                        <small>Active bookings</small>
                        <h3>2 <small style="color:var(--muted);font-weight:600">‚Äî upcoming visits</small></h3>
                    </div>
                </div>

                <div class="card">
                    <div class="kpi">
                        <small>Open requests</small>
                        <h3>1 <small style="color:var(--muted);font-weight:600">‚Äî maintenance</small></h3>
                        <div style="margin-top:10px">
                            <button class="btn" id="viewRequestsBtn">View requests</button>
                        </div>
                    </div>
                </div>

                <!-- Properties list -->
                <div class="card card-wide" id="properties">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                        <div>
                            <strong>My Properties</strong>
                            <div style="font-size:13px;color:var(--muted)">Properties you currently rent</div>
                        </div>
                        <a href="#properties" style="color:var(--accent);font-weight:700;text-decoration:none">View all</a>
                    </div>

                    <div class="properties" id="propertiesList">
                        <div th:if="${#lists.isEmpty(availableProperties)}" style="color:var(--muted);padding:12px">No properties available right now.</div>
                        <div class="property" th:each="property : ${availableProperties}" th:attr="data-id=${property.id}">
                            <div class="thumb" th:style="'background-image:url(' + (property.imagesPath != null ? #strings.split(property.imagesPath,',')[0] : 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=800&q=60') + ')' "></div>
                            <div class="meta">
                                <h4 th:text="${property.name}">Property Name</h4>
                                <small th:text="${property.city} + (property.pincode != null ? ', ' + property.pincode : '') + ' ‚Ä¢ ‚Çπ' + property.price + ' / month'">City ‚Ä¢ Price</small>
                            </div>
                            <div style="text-align:right">
                                <div class="status active" th:if="${property.verificationStatus} == 'APPROVED'">Available</div>
                                <div class="status pending" th:if="${property.verificationStatus} != 'APPROVED'" th:text="${property.verificationStatus}">Status</div>
                                <small style="color:var(--muted);display:block;margin-top:6px" th:text="${property.address}">Address</small>
                                <div class="actions" style="margin-top:8px">
                                    <a th:href="@{/property/{id}(id=${property.id})}" class="details" style="background:transparent;border:0;color:var(--accent);font-weight:700;text-decoration:none">Details</a>
                                    <button class="pay" type="button" th:onclick="|openModal('Contact landlord','Request details for ' + '${property.name}', function(){ showToast('Request sent (demo)') })|">Contact</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent activity / Payments -->
                <div class="card card-full" id="payments">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
                        <div>
                            <strong>Recent activity</strong>
                            <div style="font-size:13px;color:var(--muted)">Payments, requests and messages</div>
                        </div>
                        <div style="font-size:13px;color:var(--muted)">Show last 30 days</div>
                    </div>

                    <div style="overflow:auto">
                        <table>
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Details</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="activityBody">
                                <tr>
                                    <td>Rent</td>
                                    <td>Greenview ‚Äî Nov 2025</td>
                                    <td>‚Çπ12,500</td>
                                    <td style="color:green;font-weight:700">Paid</td>
                                </tr>
                                <tr>
                                    <td>Maintenance</td>
                                    <td>Leaky tap ‚Äî Request #342</td>
                                    <td>‚Äî</td>
                                    <td style="color:#c2410c;font-weight:700">Open</td>
                                </tr>
                                <tr>
                                    <td>Message</td>
                                    <td>Owner replied to inspection</td>
                                    <td>‚Äî</td>
                                    <td style="color:var(--muted)">Read</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>

        </main>
    </div>

    <!-- Modal (reused) -->
    <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-hidden="true">
        <div class="modal" id="modal">
            <h3 id="modalTitle">New request</h3>
            <p id="modalDesc" style="color:var(--muted)">Describe the issue or request and submit.</p>
            <form id="modalForm">
                <div style="margin-top:12px"><label style="font-size:13px">Subject</label><input required id="subject" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #eee" /></div>
                <div style="margin-top:12px"><label style="font-size:13px">Details</label><textarea required id="details" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #eee" rows="4"></textarea></div>
                <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
                    <button type="button" id="modalCancel" style="background:transparent;border:0;padding:10px 14px;border-radius:8px;cursor:pointer">Cancel</button>
                    <button class="btn" id="modalSubmit" type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <script>
        // small interactive behaviour: mark active nav, search filter, sample interactions
        document.querySelectorAll('.nav a').forEach(a => {
            a.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.nav a').forEach(x => x.classList.remove('active'));
                a.classList.add('active');
                const target = a.dataset.target;
                if (target) {
                    const el = document.getElementById(target);
                    if (el) el.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            })
        });

        // basic search filter for properties
        const input = document.querySelector('#searchInput');
        input.addEventListener('input', () => {
            const q = input.value.trim().toLowerCase();
            document.querySelectorAll('.property').forEach(prop => {
                const txt = (prop.querySelector('.meta h4').textContent + ' ' + prop.querySelector('.meta small').textContent).toLowerCase();
                prop.style.display = txt.includes(q) ? 'flex' : 'none';
            });
        });

        // Toast helper
        function showToast(text, time = 3000) {
            const t = document.getElementById('toast');
            t.textContent = text;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), time);
        }

        // Modal helpers
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalForm = document.getElementById('modalForm');

        function openModal(title, desc, onSubmit) {
            modalTitle.textContent = title;
            modalDesc.textContent = desc || '';
            modalBackdrop.style.display = 'flex';
            modalBackdrop.setAttribute('aria-hidden', 'false');
            setTimeout(() => modal.classList.add('show'), 20);

            // temporary submit handler
            modalForm.onsubmit = function(e) {
                e.preventDefault();
                const subject = document.getElementById('subject').value.trim();
                const details = document.getElementById('details').value.trim();
                if (!subject || !details) return showToast('Please fill all fields');
                closeModal();
                if (typeof onSubmit === 'function') onSubmit({
                    subject,
                    details
                });
            }
        }

        function closeModal() {
            modal.classList.remove('show');
            setTimeout(() => {
                modalBackdrop.style.display = 'none';
                modalBackdrop.setAttribute('aria-hidden', 'true');
                modalForm.reset();
            }, 220);
        }
        document.getElementById('modalCancel').addEventListener('click', closeModal);
        modalBackdrop.addEventListener('click', (e) => {
            if (e.target === modalBackdrop) closeModal();
        });

        // Button behaviours
        document.getElementById('newRequestBtn').addEventListener('click', () => {
            openModal('New maintenance request', 'Tell us what needs attention and we will notify your landlord.', (data) => {
                // simulate adding an activity row
                const tbody = document.getElementById('activityBody');
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>Maintenance</td><td>${data.subject}</td><td>‚Äî</td><td style="color:#c2410c;font-weight:700">Open</td>`;
                tbody.prepend(tr);
                showToast('Request submitted');
            });
        });

        document.getElementById('bookVisitBtn').addEventListener('click', () => {
            openModal('Book a visit', 'Pick a convenient time and we will confirm with the owner.', (data) => {
                showToast('Visit requested');
            });
        });

        document.getElementById('payRentBtn').addEventListener('click', () => {
            openModal('Pay rent', 'Enter amount and payment method (demo).', (data) => {
                showToast('Payment processed (demo)');
            });
        });

        document.getElementById('payNowBtn').addEventListener('click', () => {
            openModal('Pay rent ‚Äî Greenview', 'Pay ‚Çπ12,500 for Greenview ‚Äî Nov 2025 (demo).', (data) => {
                // mark last rent as paid in table
                const tbody = document.getElementById('activityBody');
                const tr = document.createElement('tr');
                tr.innerHTML = `<td>Rent</td><td>Greenview ‚Äî ${new Date().toLocaleString('default', {month: 'short'})} ${new Date().getFullYear()}</td><td>‚Çπ12,500</td><td style="color:green;font-weight:700">Paid</td>`;
                tbody.prepend(tr);
                showToast('Payment successful (demo)');
            });
        });

        document.getElementById('viewRequestsBtn').addEventListener('click', () => {
            // simulate navigation
            document.querySelectorAll('.nav a').forEach(x => x.classList.remove('active'));
            const reqNav = Array.from(document.querySelectorAll('.nav a')).find(a => a.dataset.target === 'requests');
            if (reqNav) {
                reqNav.classList.add('active');
                showToast('Showing requests (filtered)');
            }
        });

        // property actions
        document.querySelectorAll('.property .actions .details').forEach(b => {
            b.addEventListener('click', () => {
                const pid = b.dataset.id;
                openModal('Property details', 'Details for ' + pid, () => {
                    showToast('Close');
                });
            })
        });
        document.querySelectorAll('.property .actions .pay').forEach(b => {
            b.addEventListener('click', () => {
                const pid = b.dataset.id;
                openModal('Pay rent ‚Äî ' + pid, 'Pay rent for property ' + pid + ' (demo).', () => {
                    showToast('Payment success (demo)');
                });
            })
        });

        // accessibility: close modal with Esc
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // small fade-in effect
        window.addEventListener('load', () => {
            document.querySelectorAll('.fade-up').forEach((el, i) => {
                el.style.animationDelay = (i * 80) + 'ms'
            });
        });
    </script>
</body>

</html>