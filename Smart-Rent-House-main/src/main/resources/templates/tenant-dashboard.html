<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tenant Dashboard - Smart Rent House</title>
    <style>
        :root{--accent:#4f46e5;--muted:#6b7280;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--bg:#f6f8fb;--card:#ffffff}
        html,body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#eef2ff 0%, #f8fafc 100%);color:#0f172a;min-height:100vh}
        .navbar{background:var(--card);padding:16px 32px;box-shadow:0 2px 8px rgba(15,23,42,0.04);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
        .logo{font-weight:700;color:var(--accent);font-size:1.2rem}
        .nav-links{display:flex;gap:24px;align-items:center}
        .nav-links a{color:var(--accent);text-decoration:none;font-weight:500;transition:all 0.2s}
        .nav-links a:hover{opacity:0.7}
        .logout-btn{background:var(--danger);color:white;padding:8px 16px;border-radius:6px;text-decoration:none;font-weight:600;font-size:0.9rem}
        .container{max-width:1200px;margin:0 auto;padding:32px}
        h1{font-size:2rem;margin:0 0 8px}
        .lead{color:var(--muted);margin:0 0 32px}
        .dashboard-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:32px}
        .stat-card{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(15,23,42,0.06)}
        .stat-icon{font-size:2rem;margin-bottom:12px}
        .stat-number{font-size:2rem;font-weight:700;color:var(--accent);margin:8px 0}
        .stat-label{color:var(--muted);font-size:0.9rem}
        .section{background:var(--card);padding:24px;border-radius:12px;box-shadow:0 2px 8px rgba(15,23,42,0.06);margin-bottom:24px}
        .section h2{margin:0 0 16px;font-size:1.3rem;border-bottom:2px solid var(--accent);padding-bottom:12px}
        .action-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
        .action-card{background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);color:white;padding:24px;border-radius:12px;text-decoration:none;text-align:center;transition:all 0.3s}
        .action-card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(79,70,229,0.2)}
        .action-card-icon{font-size:2.5rem;margin-bottom:12px}
        .action-card-title{font-weight:600;margin:8px 0}
        .action-card-desc{font-size:0.9rem;opacity:0.9}
        .properties-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
        .property-item{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(15,23,42,0.06);transition:all 0.3s;border:2px solid transparent}
        .property-item:hover{box-shadow:0 8px 24px rgba(15,23,42,0.12);border-color:var(--accent)}
        .property-header{padding:16px;background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);color:white}
        .property-name{font-size:1.1rem;font-weight:600;margin:0}
        .property-address{font-size:0.85rem;opacity:0.9;margin:4px 0 0}
        .property-body{padding:16px}
        .property-info{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
        .info-item{font-size:0.9rem}
        .info-label{color:var(--muted);font-weight:600}
        .info-value{color:#0f172a;font-weight:500;margin-top:2px}
        .property-footer{display:flex;gap:8px;margin-top:12px}
        .property-btn{flex:1;padding:8px 12px;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all 0.2s;font-size:0.9rem}
        .btn-details{background:var(--accent);color:white}
        .btn-details:hover{opacity:0.9}
        .btn-contact{background:#f3f4f6;color:var(--accent);border:1px solid var(--accent)}
        .btn-contact:hover{background:var(--accent);color:white}
        .status-badge{display:inline-block;padding:4px 12px;border-radius:20px;font-size:0.85rem;font-weight:600;margin-top:8px}
        .status-pending{background:#fef3c7;color:#92400e}
        .status-approved{background:#dcfce7;color:#166534}
        .status-rejected{background:#fee2e2;color:#991b1b}
        .empty-state{text-align:center;padding:40px;color:var(--muted)}
        .empty-icon{font-size:3rem;margin-bottom:16px}
        .quick-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}
        .quick-stat{background:var(--card);padding:16px;border-radius:8px;border-left:4px solid var(--accent)}
        .quick-stat-value{font-size:1.5rem;font-weight:700;color:var(--accent)}
        .quick-stat-label{color:var(--muted);font-size:0.9rem;margin-top:4px}
        @media (max-width:768px){.container{padding:16px}.nav-links{gap:12px}.dashboard-grid{grid-template-columns:1fr}.action-grid{grid-template-columns:1fr}.properties-list{grid-template-columns:1fr}}
        
        /* FOOTER */
        .footer{background:#0f172a;color:white;padding:60px 32px;margin-top:60px}
        .footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:32px;margin-bottom:32px}
        .footer-section h4{font-size:1rem;margin-bottom:16px;color:#fff}
        .footer-section a{color:rgba(255,255,255,0.7);text-decoration:none;display:block;margin:8px 0;transition:all 0.2s}
        .footer-section a:hover{color:white}
        .footer-bottom{border-top:1px solid rgba(255,255,255,0.1);padding-top:32px;text-align:center;color:rgba(255,255,255,0.7)}
        @media (max-width:768px){.footer{padding:40px 16px}}
    </style>
</head>
<body>
<!-- Navbar -->
<div class="navbar">
    <div class="logo">üè† Smart Rent House</div>
    <div class="nav-links">
        <span style="color:var(--muted);font-weight:500" th:text="'Welcome, ' + ${user.firstName}">Welcome, Tenant</span>
        <a th:href="@{/home}">Home</a>
        <a th:href="@{/logout}" class="logout-btn">Logout</a>
    </div>
</div>

<!-- Main Content -->
<div class="container">
    <h1>Browse Available Properties üîç</h1>
    <p class="lead">Find and book your perfect rental</p>

    <!-- Quick Stats -->
    <div class="quick-stats">
        <div class="quick-stat">
            <div class="quick-stat-value" th:text="${availableProperties != null ? #lists.size(availableProperties) : '0'}">0</div>
            <div class="quick-stat-label">Available Properties</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">My Bookings</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">Saved Properties</div>
        </div>
        <div class="quick-stat">
            <div class="quick-stat-value">0</div>
            <div class="quick-stat-label">Inquiries Sent</div>
        </div>
    </div>

    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
        <div class="stat-card">
            <div class="stat-icon">üîç</div>
            <div class="stat-label">Browse Properties</div>
            <div class="stat-number" th:text="${availableProperties != null ? #lists.size(availableProperties) : '0'}">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚ù§Ô∏è</div>
            <div class="stat-label">Favorites</div>
            <div class="stat-number" th:text="${favoriteProperties != null ? #lists.size(favoriteProperties) : '0'}">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìù</div>
            <div class="stat-label">Active Inquiries</div>
            <div class="stat-number">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-label">Messages</div>
            <div class="stat-number">0</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="section">
        <h2>Quick Actions</h2>
        <div class="action-grid">
            <div class="action-card" style="background:linear-gradient(135deg,var(--accent) 0%,#6366f1 100%);cursor:pointer" onclick="document.getElementById('searchInput').focus()">
                <div class="action-card-icon">üîç</div>
                <div class="action-card-title">Search Properties</div>
                <div class="action-card-desc">Find your next home</div>
            </div>
            <a th:href="@{/favorites}" class="action-card" style="background:linear-gradient(135deg,var(--success) 0%,#059669 100%)">
                <div class="action-card-icon">‚ù§Ô∏è</div>
                <div class="action-card-title">My Favorites</div>
                <div class="action-card-desc">Saved properties</div>
            </a>
            <a href="#" class="action-card" style="background:linear-gradient(135deg,var(--warning) 0%,#d97706 100%)">
                <div class="action-card-icon">üí¨</div>
                <div class="action-card-title">Messages</div>
                <div class="action-card-desc">Chat with landlords</div>
            </a>
            <a th:href="@{/profile}" class="action-card" style="background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)">
                <div class="action-card-icon">‚öôÔ∏è</div>
                <div class="action-card-title">Settings</div>
                <div class="action-card-desc">Update your Profile</div>
            </a>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="section">
        <div style="display:flex;gap:12px;margin-bottom:16px">
            <input type="text" id="searchInput" placeholder="Search by property name, location, or price..." style="flex:1;padding:12px;border:1px solid #e5e7eb;border-radius:8px;font-size:0.95rem">
            <button style="padding:12px 24px;background:var(--accent);color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.2s" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Search</button>
        </div>
    </div>

    <!-- Available Properties Section -->
    <div class="section">
        <h2>Available Properties</h2>
        <div th:if="${#lists.isEmpty(availableProperties)}" class="empty-state">
            <div class="empty-icon">üè†</div>
            <h3>No properties available yet</h3>
            <p>Check back soon for new listings from landlords</p>
        </div>
        
        <div class="properties-list" th:unless="${#lists.isEmpty(availableProperties)}">
            <div class="property-item" th:each="property : ${availableProperties}" th:attr="data-id=${property.id}">
                <div class="property-header">
                    <h3 class="property-name" th:text="${property.name}">Property Name</h3>
                    <p class="property-address" th:text="${property.address + (property.city != null ? ', ' + property.city : '')}">Address</p>
                </div>
                <div class="property-body">
                    <div class="property-info">
                        <div class="info-item">
                            <div class="info-label">Location</div>
                            <div class="info-value" th:text="${property.city} + (property.pincode != null ? ', ' + property.pincode : '')">City, PIN</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Monthly Rent</div>
                            <div class="info-value" th:text="'‚Çπ' + ${property.price}">‚ÇπPrice</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Owner</div>
                            <div class="info-value" th:text="${property.ownerName}">Landlord Name</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Status</div>
                            <div class="info-value" th:text="${property.verificationStatus}">Status</div>
                        </div>
                    </div>
                    <p style="color:var(--muted);font-size:0.9rem;margin:12px 0" th:text="${property.description != null ? property.description : 'No description available'}">Description</p>
                    <span class="status-badge status-approved" th:if="${property.verificationStatus == 'APPROVED'}">‚úì Verified & Available</span>
                    <span class="status-badge status-pending" th:if="${property.verificationStatus == 'PENDING'}">‚è≥ Under Review</span>
                    <div class="property-footer">
                        <button class="property-btn btn-details" onclick="alert('View Details - Coming Soon')">View Details</button>
                        <button class="property-btn btn-contact" onclick="alert('Contact Landlord - Coming Soon')">Contact</button>
                        <form th:if="${user.isFavorite(property)}" th:action="@{/favorites/remove}" method="post" style="flex:0.5">
                            <input type="hidden" name="propertyId" th:value="${property.id}" />
                            <button type="submit" class="property-btn" style="background:#ef4444;color:white;font-size:1.1rem">‚ô• Remove</button>
                        </form>
                        <form th:if="${!user.isFavorite(property)}" th:action="@{/favorites/add}" method="post" style="flex:0.5">
                            <input type="hidden" name="propertyId" th:value="${property.id}" />
                            <button type="submit" class="property-btn" style="background:#f3f4f6;color:#ef4444;font-size:1.1rem">‚ô° Add</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Information Section -->
    <div class="section">
        <h2>üìö How It Works</h2>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px">
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">1. Browse</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Search and explore verified properties</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">2. Inquiry</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Send inquiry or message the landlord</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">3. Agreement</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Finalize terms and rental agreement</p>
            </div>
            <div style="padding:16px;background:#f9fafb;border-radius:8px">
                <div style="font-weight:700;color:var(--accent);margin-bottom:8px">4. Move In</div>
                <p style="margin:0;color:var(--muted);font-size:0.9rem">Complete payment and move to your new home</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('searchInput').addEventListener('input', function(e) {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.property-item').forEach(item => {
            const name = item.querySelector('.property-name').textContent.toLowerCase();
            const address = item.querySelector('.property-address').textContent.toLowerCase();
            if (name.includes(query) || address.includes(query)) {
                item.style.display = '';
            } else {
                item.style.display = 'none';
            }
        });
    });
</script>

<!-- FOOTER -->
<footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>üè† Smart Rent House</h4>
                <p style="color:rgba(255,255,255,0.7);margin:8px 0;line-height:1.6">Your trusted platform for finding and listing rental properties in India.</p>
            </div>
            <div class="footer-section">
                <h4>For Tenants</h4>
                <a href="/tenant-dashboard">Browse Properties</a>
                <a href="/favorites">My Favorites</a>
                <a href="#">Saved Searches</a>
                <a href="#">My Bookings</a>
            </div>
            <div class="footer-section">
                <h4>For Landlords</h4>
                <a href="/landlord-dashboard">List Property</a>
                <a href="#">Manage Properties</a>
                <a href="#">Tenant Inquiries</a>
                <a href="#">Payments</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="#">Help Center</a>
                <a href="#">Contact Us</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Smart Rent House. All rights reserved. | Built with ‚ù§Ô∏è for renters and landlords</p>
        </div>
    </footer>
