<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Profile - Smart Rent House</title>
    <link rel="stylesheet" th:href="@{/css/default-ui.css}" />
    <style>
        :root{--accent:#4f46e5;--accent-light:#6366f1;--muted:#6b7280;--bg:#f6f8fb;--card:#ffffff}
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:#0f172a;background:var(--bg);-webkit-font-smoothing:antialiased}
        
        /* NAVBAR */
        .navbar{background:var(--card);padding:16px 32px;box-shadow:0 2px 8px rgba(15,23,42,0.04);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100}
        .logo{font-weight:700;font-size:1.3rem;color:var(--accent);display:flex;align-items:center;gap:8px}
        .logo-icon{font-size:1.5rem}
        .nav-menu{display:flex;gap:24px;align-items:center}
        .nav-menu a{color:var(--muted);text-decoration:none;font-weight:500;transition:all 0.2s}
        .nav-menu a:hover{color:var(--accent)}
        .logout-btn{background:#ef4444;color:white;padding:8px 16px;border-radius:6px;text-decoration:none;font-weight:600;font-size:0.9rem}
        .logout-btn:hover{background:#dc2626}
        
        /* MAIN CONTENT */
        .container{max-width:900px;margin:0 auto;padding:32px}
        h1{font-size:2rem;margin:0 0 8px;color:#0f172a}
        .subtitle{color:var(--muted);margin:0 0 32px;font-size:1rem}
        
        /* PROFILE CARD */
        .profile-card{background:var(--card);padding:32px;border-radius:12px;box-shadow:0 2px 8px rgba(15,23,42,0.06)}
        
        /* FORM SECTIONS */
        .form-section{margin-bottom:32px}
        .form-section h2{font-size:1.2rem;margin:0 0 16px;color:#0f172a;border-bottom:2px solid var(--accent);padding-bottom:10px;font-weight:700}
        .form-row{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}
        .form-row.full{grid-template-columns:1fr}
        .form-group{display:flex;flex-direction:column}
        label{margin-bottom:8px;font-weight:600;color:#0f172a;font-size:0.95rem}
        input,textarea,select{padding:10px;border:1px solid #e5e7eb;border-radius:6px;font-size:0.95rem;font-family:inherit;transition:all 0.2s}
        input:focus,textarea:focus,select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(79,70,229,0.1)}
        textarea{resize:vertical;min-height:100px}
        
        /* BUTTONS & ACTIONS */
        .form-actions{display:flex;gap:12px;margin-top:32px;padding-top:20px;border-top:1px solid #e5e7eb}
        .btn{padding:12px 24px;border:none;border-radius:6px;font-weight:600;cursor:pointer;font-size:1rem;transition:all 0.2s}
        .btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-light));color:white;box-shadow:0 4px 12px rgba(79,70,229,0.2)}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(79,70,229,0.3)}
        .btn-secondary{background:#f3f4f6;color:var(--muted);border:1px solid #e5e7eb}
        .btn-secondary:hover{background:#e5e7eb;color:#0f172a}
        
        /* ALERTS */
        .alert{padding:12px 16px;border-radius:6px;margin-bottom:20px;font-weight:500}
        .alert-success{background:#dcfce7;color:#166534;border-left:4px solid #22c55e}
        .alert-error{background:#fee2e2;color:#991b1b;border-left:4px solid #ef4444}
        
        /* PROFILE PICTURE SECTION */
        .profile-picture-section{text-align:center;margin-bottom:32px;padding-bottom:32px;border-bottom:2px solid #e5e7eb}
        .profile-avatar{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid var(--accent);box-shadow:0 4px 12px rgba(79,70,229,0.15)}
        .profile-picture-section h2{font-size:1rem;margin:16px 0 8px;color:#0f172a;font-weight:700}
        .profile-picture-section p{color:var(--muted);font-size:0.9rem}
        
        /* FOOTER */
        .footer{background:#0f172a;color:white;padding:60px 32px;margin-top:60px}
        .footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:32px;margin-bottom:32px}
        .footer-section h4{font-size:1rem;margin-bottom:16px;color:#fff}
        .footer-section a{color:rgba(255,255,255,0.7);text-decoration:none;display:block;margin:8px 0;transition:all 0.2s}
        .footer-section a:hover{color:white}
        .footer-bottom{border-top:1px solid rgba(255,255,255,0.1);padding-top:32px;text-align:center;color:rgba(255,255,255,0.7)}
        
        @media (max-width:768px){
            .navbar{flex-direction:column;gap:16px}
            .container{padding:16px}
            .form-row{grid-template-columns:1fr}
            .form-actions{flex-direction:column}
            .btn{width:100%}
            .logo{justify-content:center}
            .nav-menu{justify-content:center;flex-wrap:wrap}
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="logo">
            <span class="logo-icon">üè†</span>
            <span>Smart Rent House</span>
        </div>
        <div class="nav-menu">
            <a th:href="@{/tenant-dashboard}">Dashboard</a>
            <a th:href="@{/profile}">Profile</a>
            <a th:href="@{/logout}" class="logout-btn">Logout</a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="container">
        <h1>üë§ My Profile</h1>
        <p class="subtitle">Update your personal information and settings</p>

        <!-- Flash Messages -->
        <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>
        <div id="clientError" class="alert alert-error" style="display:none"></div>
        <div th:if="${param.success}" class="alert alert-success">‚úì Changes saved successfully!</div>

        <!-- PROFILE CARD -->
        <div class="profile-card">
            <!-- Profile Picture Section -->
            <div class="profile-picture-section">
                <img th:src="@{/images/default-avatar.svg}" alt="Profile Picture" class="profile-avatar" />
                <h2>Profile Picture</h2>
                <p>Default avatar for all users</p>
            </div>

            <!-- Profile Form -->
            <form th:action="@{/profile/update}" method="post" id="profileForm">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <!-- Basic Information -->
                <div class="form-section">
                    <h2>Basic Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" 
                                th:value="${tenant?.firstName ?: ''}" />
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" 
                                th:value="${tenant?.lastName ?: ''}" />
                        </div>
                    </div>
                    <div class="form-row full">
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" 
                                th:value="${tenant?.email ?: ''}" readonly />
                        </div>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="form-section">
                    <h2>Contact Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" 
                                th:value="${tenant?.phone ?: ''}" />
                        </div>
                    </div>
                </div>

                <!-- Address Information -->
                <div class="form-section">
                    <h2>Address</h2>
                    <div class="form-row full">
                        <div class="form-group">
                            <label for="address">Street Address</label>
                            <input type="text" id="address" name="address" 
                                th:value="${tenant?.address ?: ''}" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" name="city" 
                                th:value="${tenant?.city ?: ''}" />
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" name="state" 
                                th:value="${tenant?.state ?: ''}" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="zip">ZIP Code</label>
                            <input type="text" id="zip" name="zip" 
                                th:value="${tenant?.zip ?: ''}" />
                        </div>
                    </div>
                </div>

                <!-- Personal Details -->
                <div class="form-section">
                    <h2>Personal Details</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dateOfBirth">Date of Birth</label>
                            <input type="date" id="dateOfBirth" name="dateOfBirth" 
                                th:value="${tenant?.dateOfBirth ?: ''}" />
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender">
                                <option value="">-- Select --</option>
                                <option value="MALE" th:selected="${tenant?.gender == 'MALE'}">Male</option>
                                <option value="FEMALE" th:selected="${tenant?.gender == 'FEMALE'}">Female</option>
                                <option value="OTHER" th:selected="${tenant?.gender == 'OTHER'}">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Bio -->
                <div class="form-section">
                    <h2>About You</h2>
                    <div class="form-row full">
                        <div class="form-group">
                            <label for="bio">Bio</label>
                            <textarea id="bio" name="bio" th:text="${tenant?.bio ?: ''}"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <a th:href="@{/tenant-dashboard}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>üè† Smart Rent House</h4>
                <p style="color:rgba(255,255,255,0.7);margin:8px 0;line-height:1.6">Your trusted platform for finding and listing rental properties in India.</p>
            </div>
            <div class="footer-section">
                <h4>For Tenants</h4>
                <a href="/tenant-dashboard">Browse Properties</a>
                <a href="/favorites">My Favorites</a>
                <a href="#">Saved Searches</a>
                <a href="#">My Bookings</a>
            </div>
            <div class="footer-section">
                <h4>For Landlords</h4>
                <a href="/landlord-dashboard">List Property</a>
                <a href="#">Manage Properties</a>
                <a href="#">Tenant Inquiries</a>
                <a href="#">Payments</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="#">Help Center</a>
                <a href="#">Contact Us</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Smart Rent House. All rights reserved. | Built with ‚ù§Ô∏è for renters and landlords</p>
        </div>
    </footer>

    <script>
        const profileForm = document.getElementById('profileForm');
        const clientError = document.getElementById('clientError');

        function showClientError(msg) {
            clientError.textContent = msg;
            clientError.style.display = 'block';
        }
        function hideClientError() {
            clientError.textContent = '';
            clientError.style.display = 'none';
        }

        profileForm.addEventListener('submit', function(e) {
            hideClientError();
            console.log('Profile form submitted');
        });
    </script>
</body>
</html>
