<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Upload Student ID - Smart Rent House</title>
    <style>
        :root{--bg:#f6f8fb;--card:#ffffff;--accent:#4f46e5;--muted:#6b7280}
        html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,#eef2ff 0%, #f8fafc 100%);color:#0f172a}
        .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
        .card{background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(15,23,42,0.08);padding:48px;max-width:600px;width:100%}
        h1{margin:0 0 8px;font-size:1.8rem}
        p.lead{margin:0 0 24px;color:var(--muted)}
        .upload-zone{border:2px dashed #e6e9ef;border-radius:12px;padding:40px;text-align:center;background:#fbfdff;cursor:pointer;transition:all 0.3s ease}
        .upload-zone:hover{border-color:var(--accent);background:rgba(79,70,229,0.02)}
        .upload-zone.dragover{border-color:var(--accent);background:rgba(79,70,229,0.06)}
        .upload-icon{font-size:48px;margin-bottom:12px}
        .upload-text{font-size:1rem;color:var(--muted);margin-bottom:4px}
        .upload-hint{font-size:0.85rem;color:var(--muted)}
        input[type="file"]{display:none}
        .file-input-label{display:inline-block;padding:10px 16px;border-radius:8px;background:var(--accent);color:white;font-weight:600;cursor:pointer;margin-top:8px}
        button{display:inline-block;padding:12px 32px;border-radius:10px;background:var(--accent);color:white;border:none;font-weight:600;cursor:pointer;margin-top:24px;width:100%}
        .alert{padding:12px;border-radius:8px;margin-bottom:16px}
        .alert-error{background:#fff1f2;color:#9f1239}
        .alert-info{background:#eff6ff;color:#0c4a6e}
        .file-selected{margin-top:16px;padding:12px;background:rgba(16,185,129,0.1);border-radius:8px;color:#065f46;font-size:0.9rem}
        @media (max-width:600px){.card{padding:28px}}
    </style>
</head>
<body>
<div class="wrap">
    <div class="card">
        <div style="font-weight:700;color:var(--accent);margin-bottom:16px">Smart Rent House</div>
        <h1>Verify Your Student Status</h1>
        <p class="lead">Upload a clear photo or scan of your student ID to verify your status. Our team will review it within 24 hours.</p>

        <div th:if="${error}" class="alert alert-error">
            <p th:text="${error}"></p>
        </div>

        <div class="alert alert-info">
            ‚ÑπÔ∏è Accepted formats: JPG, PNG, PDF. Max 5MB.
        </div>

        <form method="post" th:action="@{/role-selection/student-upload}" enctype="multipart/form-data" id="uploadForm">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            
            <div class="upload-zone" id="dropZone">
                <div class="upload-icon">üìÑ</div>
                <div class="upload-text">Drag and drop your file here</div>
                <div class="upload-hint">or click to select</div>
                <label class="file-input-label" for="document">Choose File</label>
                <input type="file" id="document" name="document" accept=".jpg,.jpeg,.png,.pdf" required />
            </div>

            <div id="fileSelected" class="file-selected" style="display:none"></div>

            <div style="display:flex;gap:12px;margin-top:24px">
                <button type="submit" style="flex:1">Upload & Verify</button>
            </div>

            <p style="text-align:center;color:var(--muted);font-size:0.9rem;margin-top:16px">
                This information is kept secure and encrypted.
            </p>
        </form>

        <a th:href="@{/role-selection}" style="display:block;text-align:center;color:var(--accent);text-decoration:none;font-size:0.9rem;margin-top:12px">Back</a>
    </div>
</div>

<script>
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('document');
    const fileSelectedDiv = document.getElementById('fileSelected');

    // Drag and drop events
    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('dragover');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dragover');
    });

    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            fileInput.files = files;
            updateFileDisplay(files[0]);
        }
    });

    // Click to upload
    dropZone.addEventListener('click', (e) => {
        if (e.target !== fileInput) {
            fileInput.click();
        }
    });

    // File selection change
    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            updateFileDisplay(fileInput.files[0]);
        }
    });

    function updateFileDisplay(file) {
        const maxSize = 5 * 1024 * 1024; // 5MB
        if (file.size > maxSize) {
            fileSelectedDiv.style.display = 'block';
            fileSelectedDiv.textContent = '‚ùå File too large. Max 5MB allowed.';
            fileSelectedDiv.style.background = 'rgba(239,68,68,0.1)';
            fileSelectedDiv.style.color = '#dc2626';
            fileInput.value = '';
        } else {
            fileSelectedDiv.style.display = 'block';
            fileSelectedDiv.textContent = '‚úì ' + file.name + ' (' + (file.size / 1024).toFixed(2) + ' KB)';
            fileSelectedDiv.style.background = 'rgba(16,185,129,0.1)';
            fileSelectedDiv.style.color = '#065f46';
        }
    }
</script>
</body>
</html>
